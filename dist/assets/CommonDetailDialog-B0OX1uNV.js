import{d as L,r as P,v as T,c as s,o,y as p,N as j,O as v,P as F,L as m,w as r,e as _,g as u,F as k,x as w,Q as U,h as g,t as C,_ as W,b as R}from"./index-DB7fDvaj.js";const I={key:0,class:"mb-3 flex gap-2 justify-end"},E={key:1,class:"mt-4"},K=L({__name:"CommonTable",props:{data:{},columns:{},loading:{type:Boolean},showActions:{type:Boolean},actionWidth:{},pagination:{},showAddButton:{type:Boolean},showRefreshButton:{type:Boolean}},emits:["add","refresh","view","pageChange"],setup(V,{emit:z}){const c=V,b=z,y=P(c.pagination?.currentPage||1),i=P(c.pagination?.pageSize||10),$=T(()=>c.pagination?.total||0),B=(a,l)=>l.split(".").reduce((h,f)=>h?.[f],a),t=a=>{i.value=a,b("pageChange",y.value,a)},d=a=>{y.value=a,b("pageChange",a,i.value)};return(a,l)=>{const h=u("el-button"),f=u("el-table-column"),S=u("el-table"),D=u("el-pagination"),N=F("loading");return o(),s("div",null,[a.showAddButton||a.showRefreshButton?(o(),s("div",I,[v(a.$slots,"toolbar",{},()=>[a.showAddButton?(o(),m(h,{key:0,type:"primary",onClick:l[0]||(l[0]=e=>a.$emit("add"))},{default:r(()=>[...l[4]||(l[4]=[g("新增",-1)])]),_:1})):p("",!0),a.showRefreshButton?(o(),m(h,{key:1,onClick:l[1]||(l[1]=e=>a.$emit("refresh"))},{default:r(()=>[...l[5]||(l[5]=[g("刷新",-1)])]),_:1})):p("",!0)],!0)])):p("",!0),j((o(),m(S,{data:a.data,style:{width:"100%"}},{default:r(()=>[(o(!0),s(k,null,w(a.columns,e=>(o(),m(f,{key:e.prop,prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth},U({_:2},[e.slot?{name:"default",fn:r(({row:n})=>[v(a.$slots,e.slot,{row:n,column:e},()=>[g(C(B(n,e.prop)),1)],!0)]),key:"0"}:void 0]),1032,["prop","label","width","min-width"]))),128)),a.showActions?(o(),m(f,{key:0,label:"操作",width:a.actionWidth},{default:r(({row:e})=>[v(a.$slots,"actions",{row:e},()=>[_(h,{type:"primary",size:"small",onClick:n=>a.$emit("view",e)},{default:r(()=>[...l[6]||(l[6]=[g(" 查看详情 ",-1)])]),_:1},8,["onClick"])],!0)]),_:3},8,["width"])):p("",!0)]),_:3},8,["data"])),[[N,a.loading]]),a.pagination?(o(),s("div",E,[_(D,{"current-page":y.value,"onUpdate:currentPage":l[2]||(l[2]=e=>y.value=e),"page-size":i.value,"onUpdate:pageSize":l[3]||(l[3]=e=>i.value=e),"page-sizes":[10,20,50,100],total:$.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:t,onCurrentChange:d},null,8,["current-page","page-size","total"])])):p("",!0)])}}}),X=W(K,[["__scopeId","data-v-ce03e8d4"]]),O={key:0},Q={key:0,class:"mt-4"},q={key:1,class:"mt-4"},G={key:2,class:"mt-4"},H={class:"dialog-footer"},J=L({__name:"CommonDetailDialog",props:{modelValue:{type:Boolean},title:{},data:{},fields:{},subTables:{},width:{}},emits:["update:modelValue","close"],setup(V,{emit:z}){const c=V,b=z,y=T({get:()=>c.modelValue,set:t=>b("update:modelValue",t)}),i=(t,d)=>d.split(".").reduce((a,l)=>a?.[l],t),$=(t,d)=>{if(t==null)return"-";switch(d){case"date":return new Date(t).toLocaleString("zh-CN");case"status":return t;default:return t}},B=()=>{b("update:modelValue",!1),b("close")};return(t,d)=>{const a=u("el-descriptions-item"),l=u("el-descriptions"),h=u("el-table-column"),f=u("el-table"),S=u("el-alert"),D=u("el-button"),N=u("el-dialog");return o(),m(N,{modelValue:y.value,"onUpdate:modelValue":d[0]||(d[0]=e=>y.value=e),title:t.title,width:t.width,onClose:B},{footer:r(()=>[R("div",H,[_(D,{onClick:B},{default:r(()=>[...d[2]||(d[2]=[g("关闭",-1)])]),_:1}),v(t.$slots,"footer",{data:t.data},void 0,!0)])]),default:r(()=>[t.data?(o(),s("div",O,[_(l,{column:2,border:""},{default:r(()=>[(o(!0),s(k,null,w(t.fields,e=>(o(),m(a,{key:e.key,label:e.label},{default:r(()=>[e.slot?v(t.$slots,e.slot,{key:0,value:i(t.data,e.key),data:t.data},()=>[g(C($(i(t.data,e.key),e.type)),1)],!0):(o(),s(k,{key:1},[g(C($(i(t.data,e.key),e.type)),1)],64))]),_:2},1032,["label"]))),128))]),_:3}),t.$slots.content?(o(),s("div",Q,[v(t.$slots,"content",{data:t.data},void 0,!0)])):p("",!0),t.subTables&&t.subTables.length>0?(o(),s("div",q,[(o(!0),s(k,null,w(t.subTables,e=>(o(),s("div",{key:e.title,class:"mb-4"},[R("h4",null,C(e.title),1),_(f,{data:i(t.data,e.dataKey),size:"small"},{default:r(()=>[(o(!0),s(k,null,w(e.columns,n=>(o(),m(h,{key:n.prop,prop:n.prop,label:n.label,width:n.width},U({_:2},[n.slot?{name:"default",fn:r(({row:A})=>[v(t.$slots,`${e.key}-${n.slot}`,{row:A,column:n},()=>[g(C(i(A,n.prop)),1)],!0)]),key:"0"}:void 0]),1032,["prop","label","width"]))),128))]),_:2},1032,["data"])]))),128))])):p("",!0),i(t.data,"failureReasons")&&i(t.data,"failureReasons").length>0?(o(),s("div",G,[d[1]||(d[1]=R("h4",null,"失败原因",-1)),(o(!0),s(k,null,w(i(t.data,"failureReasons"),(e,n)=>(o(),m(S,{key:n,title:e,type:"error",closable:!1,class:"mb-2"},null,8,["title"]))),128))])):p("",!0)])):p("",!0)]),_:3},8,["modelValue","title","width"])}}}),Y=W(J,[["__scopeId","data-v-de18b067"]]);export{X as C,Y as a};
