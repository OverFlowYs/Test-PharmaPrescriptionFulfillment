const r="https://api.example.com";async function l(s,n){const o=typeof s=="string"&&!s.startsWith("http")?`${r}${s}`:s,t=await fetch(o,{headers:{"Content-Type":"application/json"},cache:"no-store",...n});if(!t.ok){let e="Request failed";const c=t.headers.get("content-type")||"";try{if(c.includes("application/json"))e=(await t.json())?.message||e;else{const a=await t.text();a.startsWith("<!doctype")||a.startsWith("<!DOCTYPE")?e="Unexpected HTML response; check mock/MSW setup":e=a||e}}catch{}throw{message:e,status:t.status}}return(t.headers.get("content-type")||"").includes("application/json")?t.json():await t.text()}export{l as a};
