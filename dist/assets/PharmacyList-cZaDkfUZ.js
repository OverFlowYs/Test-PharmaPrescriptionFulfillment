import{g as b}from"./pharmacies-BV1EheJl.js";import{C as h,a as f}from"./CommonDetailDialog-B0OX1uNV.js";import{d as y,r as l,n as g,c as v,o as w,b as k,e as u,E as D}from"./index-DB7fDvaj.js";import"./client-2qhNOC3Y.js";const x=y({__name:"PharmacyList",setup(V){const t=l(!1),o=l([]),s=l(!1),r=l(null),d=[{prop:"id",label:"ID",width:100},{prop:"name",label:"药房名称"},{prop:"address",label:"地址"},{prop:"phone",label:"电话"},{prop:"status",label:"状态",width:100,slot:"status"}],i=[{key:"id",label:"药房ID"},{key:"name",label:"药房名称"},{key:"address",label:"地址"},{key:"phone",label:"电话"},{key:"email",label:"邮箱"},{key:"status",label:"状态",slot:"status"}],p=[{key:"drugs",title:"分配的药品",dataKey:"allocatedDrugs",columns:[{prop:"drugId",label:"药品ID",width:100},{prop:"drugName",label:"药品名称"},{prop:"quantity",label:"数量",width:100},{prop:"expiry",label:"有效期",width:120}]}],n=async()=>{t.value=!0;try{o.value=await b()}catch(e){D.error(e?.message||"加载失败")}finally{t.value=!1}},m=e=>{r.value=e,s.value=!0};return g(n),(e,a)=>(w(),v("div",null,[a[1]||(a[1]=k("h2",null,"药房管理",-1)),u(h,{data:o.value,columns:d,loading:t.value,"show-actions":!0,"show-refresh-button":!0,onRefresh:n,onView:m},null,8,["data","loading"]),u(f,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=c=>s.value=c),title:"药房详情",data:r.value,fields:i,"sub-tables":p},null,8,["modelValue","data"])]))}});export{x as default};
